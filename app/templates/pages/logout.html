{% extends 'layouts/base.html' %}

{% block title %}Logging Out - Family Office Platform{% endblock %}

{% block content %}
<div class="row justify-content-center align-items-center min-vh-100">
    <div class="col-md-6 col-lg-4 text-center">
        <div class="spinner-border text-primary mb-3" role="status">
            <span class="visually-hidden">Logging out...</span>
        </div>
        <p class="text-muted">Logging out...</p>
    </div>
</div>

<script>
async function performLogout() {
    try {
        // Call API to clear server-side cookies
        await fetch('/api/v1/auth/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + (localStorage.getItem('access_token') || '')
            }
        });
    } catch (error) {
        console.error('Logout API error:', error);
    }

    // Clear localStorage
    localStorage.removeItem('access_token');
    localStorage.removeItem('refresh_token');
    localStorage.removeItem('user');

    // Redirect to login
    window.location.href = '/login';
}

// Execute logout immediately
performLogout();
</script>
{% endblock %}
